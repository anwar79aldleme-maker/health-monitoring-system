<script>
const token=localStorage.getItem("token");
if(!token){ alert("Login first"); window.location.href="login.html"; }

function logout(){ localStorage.removeItem("token"); window.location.href="login.html"; }

function load(){
 fetch("/api/patients",{headers:{"Authorization":"Bearer "+token}})
 .then(r=>r.json()).then(d=>{
  tbl.innerHTML=`<tr><th>Name</th><th>Phone</th><th>Email</th></tr>`;
  d.forEach(p=>tbl.innerHTML+=`<tr><td>${p.name}</td><td>${p.phone}</td><td>${p.email}</td></tr>`);
 });
}
load();
</script>

<button onclick="logout()">Logout</button>

